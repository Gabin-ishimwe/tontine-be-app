generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// User Model
model User {
  id        Int      @id @default(autoincrement())
  username  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  pool      Pool     @relation(fields: [poolId], references: [id])
  poolId    String
}

// Pool Model
model Pool {
  id                  String    @id @default(uuid())
  title               String    @unique
  description         String
  category            String
  amountPerSprint     Int
  sprintTime          Int // contribution time
  sprintTimeType      String
  cycleTime           String? // Withdrawal time
  cycleTimeType       String? 
  numberOfParticipants Int       @default(3)
  createdAt           DateTime  @default(now())
  updatedAt           DateTime  @updatedAt
  wallet              Wallet?
  members             User[]

  @@index([id, title])
}

// Wallet Model
model Wallet {
  accountNumber String   @id @unique @default(uuid())
  isActive      Boolean  @default(false)
  amount        Int
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  pool          Pool     @relation(fields: [poolId], references: [id], onDelete: Cascade)
  poolId        String   @unique

  @@index([accountNumber])
}

enum TimeType {
  DAYS
  WEEKS
  MONTHS
}